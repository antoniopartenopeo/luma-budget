# Audit UI 360 - Numa Budget

Data audit: 2026-02-22  
Perimetro: intera app UI (`/`, `/transactions`, `/transactions/import`, `/insights`, `/simulator`, `/settings`, `/updates`, `/brain`)  
Baseline: commit `f6afd7d` (post-sync serale)  
Modalita: diagnostica read-only (nessuna modifica logica business)  
Metodo: analisi statica + verifica runtime con screenshot desktop/tablet/mobile

Governance di riferimento:
- `.agent/rules/ui-regression-checklist.md`
- `.agent/skills/numa-ui-standards/SKILL.md`
- `docs/governance/MOTION_PRINCIPLES.md`

## 1) Executive Summary UI

Il sistema visivo e in miglioramento rispetto alla passata precedente: copertura motion base ora uniforme su route core, copy notifiche riallineata al contesto app e cleanup dei residui UI rimasti dalla revisione import/scenario.

Debito attivo residuo su quattro assi:

1. Layering motion multiplo in alcune superfici (container + macro + card).
2. Drift colore/materiale nei chart (hex hardcoded e styling inline).
3. Densita tipografica micro-size in aree ad alta informazione.
4. Drift editoriale lieve (mix IT/EN in navigazione primaria).

Valutazione sintetica:
- Stato complessivo UI: **parzialmente conforme (trend positivo)**
- Rischio principale: **coerenza visuale su chart/motion**
- Rischio secondario: **leggibilita micro-typography e consistenza semantica**

## 2) Matrice Route x Coerenza UI

Legenda: `OK` coerente, `PARZ` parzialmente coerente, `KO` incoerente

| Route | Motion ingressi | Colori/Materiali | Tipografia | Responsive | Evidenze statiche | Evidenze runtime |
|---|---|---|---|---|---|---|
| `/` | PARZ | PARZ | PARZ | OK | `src/app/page.tsx:32`, `src/features/dashboard/components/kpi-cards.tsx:218`, `src/components/patterns/kpi-card.tsx:89` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/home.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/home.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/home.png` |
| `/transactions` | OK | OK | PARZ | OK | `src/app/transactions/page.tsx:141` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/transactions.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/transactions.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/transactions.png` |
| `/transactions/import` | OK | PARZ | PARZ | OK | `src/app/transactions/import/page.tsx:16`, `src/components/patterns/numa-engine-card.tsx:63` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/transactions-import.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/transactions-import.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/transactions-import.png` |
| `/insights` | PARZ | KO | PARZ | OK | `src/features/insights/components/insights-page-content.tsx:49`, `src/features/insights/components/trend-analysis-card.tsx:344`, `src/features/insights/components/trend-analysis-card.tsx:535` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/insights.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/insights.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/insights.png` |
| `/simulator` | OK | PARZ | PARZ | OK | `src/app/simulator/page.tsx:31`, `src/components/patterns/numa-engine-card.tsx:63` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/simulator.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/simulator.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/simulator.png` |
| `/settings` | OK | OK | PARZ | PARZ | `src/app/settings/page.tsx:46`, `src/app/settings/page.tsx:96` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/settings.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/settings.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/settings.png` |
| `/updates` | OK | OK | PARZ | OK | `src/features/notifications/components/updates-page-content.tsx:44`, `src/features/notifications/components/topbar-notifications.tsx:75` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/updates.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/updates.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/updates.png` |
| `/brain` | OK | PARZ | KO | PARZ | `src/app/brain/page.tsx:680`, `src/app/brain/page.tsx:746`, `src/app/brain/page.tsx:877` | `docs/audit/artifacts/ui-360-2026-02-22/desktop/brain.png`, `docs/audit/artifacts/ui-360-2026-02-22/tablet/brain.png`, `docs/audit/artifacts/ui-360-2026-02-22/mobile/brain.png` |

## 3) Tabella Finding Attivi

| ID | Tipo | Gravita | Impatto roadmap | Problema | Evidenze | Fatto osservato | Inferenza |
|---|---|---|---|---|---|---|---|
| F-UI-001 | Motion Inconsistency | High | Alto | Layering motion concorrente (container + macro + card) in superfici core | `src/components/patterns/macro-section.tsx:51`, `src/features/dashboard/components/kpi-cards.tsx:218`, `src/features/insights/components/ai-advisor-card.tsx:207` | Alcuni blocchi UI transitano attraverso 2-3 layer di animazione | Ritmo non sempre prevedibile e rischio divergenza percettiva tra sezioni |
| F-UI-002 | Accessibility Fragility | High | Alto | Copertura `prefers-reduced-motion` non uniforme su animazioni Framer locali | `src/app/globals.css:253`, `src/components/patterns/kpi-card.tsx:89`, `src/features/insights/components/insight-card.tsx:240` | Esiste presidio globale CSS ma non tutte le transizioni Framer risultano gate-izzate in modo omogeneo | Possibile comfort non ottimale per utenti sensibili al movimento |
| F-UI-003 | Fragility | Medium | Medio | Espansioni card basate su animazione layout (`height: auto`) | `src/components/patterns/expandable-card.tsx:151`, `src/components/patterns/expandable-card.tsx:156` | Le card espandibili dipendono da transizioni layout dinamiche | Possibili micro-stutter/reflow su device meno performanti |
| F-UI-004 | Color/Material Drift | High | Alto | Drift cromatico su chart Insights (hex hardcoded + tooltip style inline) | `src/features/insights/components/trend-analysis-card.tsx:344`, `src/features/insights/components/trend-analysis-card.tsx:535`, `src/features/insights/components/trend-analysis-card.tsx:632` | Colori e parti di styling grafico non derivano interamente da token | Rischio incoerenza tema e manutenzione più fragile nel tempo |
| F-UI-005 | Color/Material Drift | Medium | Medio | Hardcoded palette/styling in composizione spese Dashboard | `src/features/dashboard/components/charts/spending-composition-card.tsx:56`, `src/features/dashboard/components/charts/spending-composition-card.tsx:325`, `src/features/dashboard/components/charts/spending-composition-card.tsx:339` | Persistono colori inline oltre la palette derivata dati | Maggiore probabilita di drift visuale tra chart e design system |
| F-UI-006 | Color/Material Drift | Medium | Medio | Palette categorie basata su set statico di hex | `src/features/categories/components/category-form-sheet.tsx:16`, `src/features/categories/components/category-form-sheet.tsx:36` | Selettore colore categorie rimane completamente hardcoded | Evoluzione palette globale non automaticamente propagata |
| F-UI-007 | Typography Drift | Medium | Medio | Densita micro-font in aree ad alta informazione | `src/features/notifications/components/topbar-notifications.tsx:61`, `src/features/notifications/components/updates-page-content.tsx:91`, `src/app/brain/page.tsx:746` | Uso esteso di `text-[10px]` e varianti ravvicinate | Leggibilita ridotta su viewport piccoli e maggiore carico cognitivo |
| F-UI-008 | Semantic Drift | Low | Basso | Mix linguistico in navigazione primaria | `src/components/layout/sidebar.tsx:21`, `src/components/layout/sidebar.tsx:22` | Coesistono label IT/EN (`Insights`, `Financial Lab`) | Tono editoriale non completamente uniforme |

## 4) Chiusure Verificate Oggi

1. Copertura motion route riallineata sulle pagine core (`settings`, `transactions/import`, `updates`) con `StaggerContainer`.
- Evidenze: `src/app/settings/page.tsx:96`, `src/app/transactions/import/page.tsx:16`, `src/features/notifications/components/updates-page-content.tsx:44`.

2. Copy notifiche non piu orientata a fase beta.
- Evidenze: `src/features/notifications/components/topbar-notifications.tsx:51`, `src/features/notifications/components/topbar-notifications.tsx:75`, `src/features/notifications/components/updates-page-content.tsx:48`.

3. Cleanup residui UI nel flusso import/review e portfolio abbonamenti completato.
- Evidenze: `src/features/import-csv/components/review/index.ts:2`.

4. Firma helper Financial Lab riallineata con utilizzo parametro realtime.
- Evidenze: `src/features/goals/utils/financial-lab-copy.ts:86`.

## 5) Motion Audit Dedicato

### 5.1 Ingressi route

Route con orchestrazione motion esplicita (`StaggerContainer`):
- `src/app/page.tsx:32`
- `src/app/transactions/page.tsx:141`
- `src/app/transactions/import/page.tsx:16`
- `src/app/simulator/page.tsx:31`
- `src/app/settings/page.tsx:96`
- `src/features/insights/components/insights-page-content.tsx:49`
- `src/features/notifications/components/updates-page-content.tsx:44`
- `src/app/brain/page.tsx:680`

### 5.2 Layering motion

- `MacroSection` applica motion strutturale (`src/components/patterns/macro-section.tsx:51`).
- `DashboardKpiGrid` usa `StaggerContainer` + `motion.div` multipli (`src/features/dashboard/components/kpi-cards.tsx:218`).
- `AIAdvisorCard` aggiunge container staggered locale (`src/features/insights/components/ai-advisor-card.tsx:207`).

### 5.3 Reduced motion

- Presidio globale su classi primitive (`src/app/globals.css:253`).
- Necessita monitoraggio continuo su componenti Framer locali (`kpi-card`, `insight-card`).

### 5.4 Motion su proprieta layout

- Expandable card usa animazione `height: auto` (`src/components/patterns/expandable-card.tsx:156`).

## 6) Color & Material Audit Dedicato

1. Drift token in Insights chart:
- `src/features/insights/components/trend-analysis-card.tsx:344`
- `src/features/insights/components/trend-analysis-card.tsx:535`
- `src/features/insights/components/trend-analysis-card.tsx:632`

2. Hardcoded color/styling in composizione Dashboard:
- `src/features/dashboard/components/charts/spending-composition-card.tsx:56`
- `src/features/dashboard/components/charts/spending-composition-card.tsx:325`
- `src/features/dashboard/components/charts/spending-composition-card.tsx:339`

3. Palette categorie statica:
- `src/features/categories/components/category-form-sheet.tsx:16`
- `src/features/categories/components/category-form-sheet.tsx:36`

## 7) Typography & Semantics Audit

1. Micro-typography ricorrente in notifiche/updates:
- `src/features/notifications/components/topbar-notifications.tsx:61`
- `src/features/notifications/components/topbar-notifications.tsx:153`
- `src/features/notifications/components/updates-page-content.tsx:91`

2. Micro-label intensa in brain page:
- `src/app/brain/page.tsx:746`
- `src/app/brain/page.tsx:877`
- `src/app/brain/page.tsx:885`

3. Mix linguistico nav primaria:
- `src/components/layout/sidebar.tsx:21`
- `src/components/layout/sidebar.tsx:22`

## 8) Rischi 6-12 Mesi (Se Non Si Interviene)

1. **Erosione coerenza visuale** (motion layering + hardcoded chart styling).
- Probabilita: alta
- Effetto: divergenza progressiva tra sezioni e regressioni percettive.

2. **Debito accessibilita motion** (copertura reduced-motion non completamente centralizzata).
- Probabilita: medio-alta
- Effetto: esperienza non ottimale per utenti sensibili al movimento.

3. **Costo manutentivo chart/UI crescente** (palette e tooltip non token-first).
- Probabilita: alta
- Effetto: ritocchi visuali più costosi e rischio regressioni cromatiche.

4. **Consistenza editoriale non piena** (lessico IT/EN misto in navigazione).
- Probabilita: media
- Effetto: identita prodotto percepita meno uniforme.

## 9) Appendice Evidenze

### 9.1 Artifact runtime

Percorso root: `docs/audit/artifacts/ui-360-2026-02-22/`

Desktop (`1440x900`):
- `desktop/home.png`
- `desktop/transactions.png`
- `desktop/transactions-import.png`
- `desktop/insights.png`
- `desktop/simulator.png`
- `desktop/settings.png`
- `desktop/updates.png`
- `desktop/brain.png`

Tablet (`1024x1366`):
- `tablet/home.png`
- `tablet/transactions.png`
- `tablet/transactions-import.png`
- `tablet/insights.png`
- `tablet/simulator.png`
- `tablet/settings.png`
- `tablet/updates.png`
- `tablet/brain.png`

Mobile (`390x844`):
- `mobile/home.png`
- `mobile/transactions.png`
- `mobile/transactions-import.png`
- `mobile/insights.png`
- `mobile/simulator.png`
- `mobile/settings.png`
- `mobile/updates.png`
- `mobile/brain.png`

### 9.2 Comandi runtime usati

- Cattura screenshot Playwright con attesa deterministica (`--wait-for-timeout=3500`).
- Browser: Chromium.
- Nessuna modifica a file applicativi durante la fase di audit.

### 9.3 Nota metodologica

Le conclusioni sono separate in:
- **Fatto osservato**: evidenza statica e/o runtime misurabile.
- **Inferenza**: rischio o impatto prevedibile sulla roadmap UI.

Nessuna proposta di refactor/fix inclusa in questo documento.
